<html>
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes"/>

        <title>pb-code-highlight Demo</title>
        <!--scripts-->
        <script src="../node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js" defer></script>
        <script>
        // Workaround for Polymer modules under Vite: some @polymer/* packages
        // reference this Closure helper; define a no-op if absent.
        // See: https://github.com/Polymer/polymer/issues/4845
        window.JSCompiler_renameProperty = window.JSCompiler_renameProperty || function (prop, obj) { return prop; };
    </script>
    <script type="module">
        // Load iconset first so any <iron-icon> upgrades have a registry to query.
        import '@polymer/iron-form/iron-form.js';
        import '@polymer/paper-button/paper-button.js';
    </script>
        <script type="module" src="../src/docs/pb-demo-snippet.js"></script>
        <script type="module" src="../src/pb-repeat.js"></script>
        <script type="module" src="../src/pb-page.js"></script>
        <!--/scripts-->
    </head>

    <body>
        <pb-demo-snippet>
            <template>
                <style>
                    .instance {
                        display: flex;
                        align-items: center;
                    }
                    button {
                        display: block;
                    }
                </style>
                <pb-page>
                    <iron-form id="form">
                        <form action="">
                            <pb-repeat>
                                <template>
                                    <label>First name:</label>
                                    <input type="text" name="first">
                                    <label>Surname:</label>
                                    <input type="text" name="surname">
                                    <label>Title:</label>
                                    <select name="title">
                                        <option></option>
                                        <option>Dr.</option>
                                        <option>Prof.</option>
                                    </select>
                                    <label>Vegetarian:</label>
                                    <input type="checkbox" name="veggie">
                                </template>
                            </pb-repeat>
                            <button type="submit">Save</button>
                        </form>
                    </iron-form>
                    <pre id="output"></pre>
                </pb-page>
                <script>
                    window.addEventListener('WebComponentsReady', () => {
                        const form = document.getElementById('form');
                        form.addEventListener('iron-form-presubmit', (ev) => {
                            ev.preventDefault();
                            const data = form.serializeForm();
                            const queryString = Object.keys(data).map((key) => `${key  }=${  data[key]}`).join('&');
                            document.getElementById('output').innerText = queryString;
                        });
                    });
                </script>
            </template>
        </pb-demo-snippet>
    </body>
</html>
